events {
}

http {
    include    conf/mime.types;

    server {
            listen 80;
            listen [::]:80;

            server_name histoires.xyz;

            location / {
                    proxy_pass http://time-web/;
            }
    }

    server {
            listen 80;
            listen [::]:80;

            server_name blueforest.org;

            ssl_certificate     /etc/letsencrypt/live/blueforest.org/fullchain.pem;
            ssl_certificate_key /etc/letsencrypt/live/blueforest.org/privkey.pem;

            location /.well-known/acme-challenge {
                allow all;
                alias /var/www/certif;
            }
            location / {
                proxy_pass http://trees-web-show/;
            }
    }

    server {
            listen 80;
            listen [::]:80;

            server_name show.blueforest.org;

            location / {
                    proxy_pass http://trees-web/;
            }
    }

    server {
            listen 80;
            listen [::]:80;

            server_name draw.blueforest.org;

            location / {
                    proxy_pass http://trees-web-draw/;
            }
    }

    server {
            listen 80;
            listen [::]:80;

            server_name play.blueforest.org;

            location / {
                    proxy_pass http://trees-web-play/;
            }
    }

}